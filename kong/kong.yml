_format_version: "3.0"
_transform: true

services:
  - name: bff-vehiculos
    url: http://bff-transporte:8080/api/vehiculos
    routes:
      - name: vehiculos-route
        paths:
          - /api/vehiculos
        strip_path: false

  - name: bff-ubicaciones
    url: http://bff-transporte:8080/api/ubicaciones
    routes:
      - name: ubicaciones-route
        paths:
          - /api/ubicaciones
        strip_path: false

  - name: bff-rutas
    url: http://bff-transporte:8080/api/rutas
    routes:
      - name: rutas-route
        paths:
          - /api/rutas
        strip_path: false

  - name: bff-paradas
    url: http://bff-transporte:8080/api/paradas
    routes:
      - name: paradas-route
        paths:
          - /api/paradas
        strip_path: false

  - name: bff-horarios
    url: http://bff-transporte:8080/api/horarios
    routes:
      - name: horarios-route
        paths:
          - /api/horarios
        strip_path: false

plugins:
  - name: cors
    config:
      origins:
        - "*"
      methods:
        - GET
        - POST
        - PUT
        - DELETE
        - OPTIONS
      headers:
        - Authorization
        - Content-Type
      exposed_headers:
        - Authorization
      credentials: false
      max_age: 3600

  - name: rate-limiting
    config:
      minute: 100
      policy: local
